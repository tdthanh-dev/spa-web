spring.application.name=CRM Module
server.port=8081

# ==== Database (PostgreSQL) ====
spring.datasource.url=jdbc:postgresql://localhost:5432/crm_spa
spring.datasource.username=postgres
spring.datasource.password=1234
spring.datasource.driver-class-name=org.postgresql.Driver

# ==== JPA / Hibernate ====
spring.jpa.hibernate.ddl-auto=update
spring.jpa.properties.hibernate.hbm2ddl.auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# Multi-schema & batch
spring.jpa.properties.hibernate.default_schema=public
spring.jpa.properties.hibernate.jdbc.batch_size=25
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true

# ==== Flyway ====
spring.flyway.enabled=false
spring.flyway.locations=classpath:db/migration
spring.flyway.baseline-on-migrate=true
spring.flyway.schemas=public,core,lead,service,billing,audit
spring.flyway.validate-on-migrate=false

# ==== JWT (dev) ====
jwt.secret=404E635266556A586E3272357538782F413F4428472B4B6250645367566B5970
jwt.expiration=86400000
jwt.refresh.expiration=604800000

# ==== Mail (dev) ====
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=tdthanh.dev2025@gmail.com
spring.mail.password=uwod xbag oxyd kwnf
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.ssl.trust=smtp.gmail.com

# ==== OTP ====
otp.expiration.minutes=5
debug.otp.enabled=true

# ==== Redis ====
spring.data.redis.host=localhost
spring.data.redis.port=6379
spring.data.redis.password=
spring.data.redis.database=0
spring.data.redis.timeout=2000ms
spring.data.redis.lettuce.pool.max-active=8
spring.data.redis.lettuce.pool.max-idle=8
spring.data.redis.lettuce.pool.min-idle=0
spring.data.redis.lettuce.pool.max-wait=-1ms

# ==== Rate Limit (Unified Configuration) ====
# Global rate limiting (hiện tại disabled)
app.rate-limit.global.requests-per-minute=100
app.rate-limit.global.window-minutes=1
app.rate-limit.global.enabled=false

# Lead-specific rate limiting
app.rate-limit.lead.max-per-hour=10
app.rate-limit.lead.max-per-day=10
app.rate-limit.lead.window-hours=1
app.rate-limit.lead.window-days=24
app.rate-limit.lead.enabled=true

# Cache prefixes
app.rate-limit.cache.global-prefix=GLOBAL_RATE_LIMIT:
app.rate-limit.cache.lead-prefix=LEAD_RATE_LIMIT:
app.rate-limit.cache.default-ttl-hours=24

# ==== Upload ====
app.upload.dir=src/main/resources/static/uploads
app.upload.max-file-size=10MB
app.upload.max-request-size=50MB
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB
spring.servlet.multipart.enabled=true

# ==== CORS ====
# handled in CorsConfig.java

# ==== Lead Module (All configurations) ====
# Cache configuration
app.lead.cache.ttl-hours=24
app.lead.cache.temp-storage-ttl-hours=48
app.lead.cache.prefix=LEAD:
app.lead.cache.all-prefix=ALL:
app.lead.cache.status-prefix=STATUS:
app.lead.cache.temp-prefix=TEMP:
app.lead.cache.stats-prefix=STATS:

# Anti-spam configuration (10 seconds between requests, max 10 per day)
app.lead.anti-spam.enabled=true
app.lead.anti-spam.unique-constraint-seconds=10
app.lead.anti-spam.ip-block-seconds=10
app.lead.anti-spam.max-requests-per-day=10
app.lead.anti-spam.max-submissions-per-phone=1

# Stats configuration  
app.lead.stats.auto-update=true
app.lead.stats.refresh-interval-hours=1

# =========================
# Logging: GIẢM SPAM LOG
# =========================
logging.level.root=INFO

# Spring Security: chỉ INFO (không DEBUG chuỗi filter)
logging.level.org.springframework.security=INFO
logging.level.org.springframework.security.web=INFO
logging.level.org.springframework.security.web.FilterChainProxy=INFO
logging.level.org.springframework.security.authorization.method=INFO

# Spring Web/MVC/Filter
logging.level.org.springframework.web=INFO
logging.level.org.springframework.web.filter=INFO

# Hibernate: để INFO, không in SQL chi tiết/binding
logging.level.org.hibernate=INFO
logging.level.org.hibernate.SQL=INFO
logging.level.org.hibernate.orm.jdbc.bind=INFO
# Nếu dùng key cũ:
logging.level.org.hibernate.type.descriptor.sql=INFO
logging.level.org.hibernate.type.descriptor.jdbc=INFO

logging.level.com.htttql.crmmodule.auth=INFO
