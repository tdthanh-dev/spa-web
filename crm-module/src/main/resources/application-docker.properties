# Docker-specific configuration for CRM Spa Dr. Oha
# This file overrides application.properties when SPRING_PROFILES_ACTIVE=docker

# Database Configuration for Docker external containers
spring.datasource.url=jdbc:postgresql://172.18.0.5:5432/crm_spa
spring.datasource.username=postgres
spring.datasource.password=1234
spring.datasource.driver-class-name=org.postgresql.Driver

# JPA Configuration
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.hbm2ddl.create_namespaces=true

# Multi-schema configuration
spring.jpa.properties.hibernate.default_schema=public
spring.jpa.properties.hibernate.jdbc.batch_size=25
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true

# Redis Configuration for Docker external containers
spring.data.redis.host=172.18.0.6
spring.data.redis.port=6379
spring.data.redis.database=0
spring.data.redis.timeout=2000ms
spring.data.redis.lettuce.pool.max-active=8
spring.data.redis.lettuce.pool.max-idle=8
spring.data.redis.lettuce.pool.min-idle=0
spring.data.redis.lettuce.pool.max-wait=-1ms

# JWT Configuration
jwt.secret=404E635266556A586E3272357538782F413F4428472B4B6250645367566B5970
jwt.expiration=86400000
jwt.refresh.expiration=604800000

# Email Configuration (SMTP Gmail)
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=tdthanh.dev2025@gmail.com
spring.mail.password=uwod xbag oxyd kwnf
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.ssl.trust=smtp.gmail.com

# OTP Configuration
otp.expiration.minutes=5

# Rate Limiting Configuration (Unified & Stricter for Production)
app.rate-limit.global.requests-per-minute=5
app.rate-limit.global.window-minutes=1
app.rate-limit.global.enabled=false

# Lead rate limiting (stricter for production)
app.rate-limit.lead.max-per-hour=5
app.rate-limit.lead.max-per-day=50
app.rate-limit.lead.window-hours=1
app.rate-limit.lead.window-days=24
app.rate-limit.lead.enabled=true

# Lead Module Configuration (Production)
app.lead.cache.ttl-hours=24
app.lead.cache.temp-storage-ttl-hours=48
app.lead.cache.prefix=LEAD:
app.lead.cache.all-prefix=ALL:
app.lead.cache.status-prefix=STATUS:
app.lead.cache.temp-prefix=TEMP:
app.lead.cache.stats-prefix=STATS:
app.lead.anti-spam.enabled=true
app.lead.anti-spam.unique-constraint-seconds=10
app.lead.anti-spam.ip-block-seconds=10
app.lead.anti-spam.max-requests-per-day=10
app.lead.stats.auto-update=true
app.lead.stats.refresh-interval-hours=1

# File Upload Configuration
app.upload.dir=D:/DoAnTN/IMS/crm-module/uploads
app.upload.max-file-size=10MB
app.upload.max-request-size=50MB

# Spring Boot file upload configuration
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB
spring.servlet.multipart.enabled=true

# Application Configuration
server.port=8081

# Logging Configuration
logging.level.com.htttql.crmmodule.auth=DEBUG
logging.level.org.springframework.security=DEBUG
logging.level.org.springframework.web.filter=DEBUG
logging.level.root=INFO

# Actuator Configuration
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=when-authorized
